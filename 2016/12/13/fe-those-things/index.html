<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="这两年的前端领域，最感慨的莫过于【变化太快】。各种思想、框架、类库层出不穷，同一个需求点，通常会有多种实现方案，架构选型工作的难度与日俱增。面对每天都在产生的前端领域新词汇，不免感到心累，也难免产生廉颇老矣，尚能饭否的危机感。
无论如何，架构选型和升级的工作仍然要做，在这样的趋势和潮流下，要想对每一">
    

    <!--Author-->
    
        <meta name="author" content="guomeiqing">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="架构一个复杂前端系统需要关注哪些点"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="上古清茗"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

        <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>架构一个复杂前端系统需要关注哪些点 - 上古清茗</title>

    <!-- Bootstrap Core CSS -->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Google Analytics -->
    


    <!-- favicon -->
    
	
</head>


<body>

    <!-- Menu -->
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">上古清茗的博客</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                
                    <li>
                        <a href="/">
                            
                                Home
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives">
                            
                                Archives
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="https://github.com/shanggqm">
                            
                                <i class="fa fa-github fa-stack-2x"></i>
                            
                        </a>
                    </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

    <!-- Main Content -->
    <!-- Page Header -->
<!-- Set your background image for this header in your post front-matter: cover -->

<header class="intro-header" style="background-image: url('/img/fe-those-things.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>架构一个复杂前端系统需要关注哪些点</h1>
                    
                    <span class="meta">
                        <!-- Date and Author -->
                        
                        2016-12-13
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Tags and categories -->
           
                <div class="col-lg-4 col-lg-offset-2 col-md-5 col-md-offset-1 post-tags">
                    
                        


<a href="/tags/理论分析/">#理论分析</a>


                    
                </div>
                <div class="col-lg-4 col-md-5 post-categories">
                    
                </div>
            

            <!-- Gallery -->
            

            <!-- Post Main Content -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <p>这两年的前端领域，最感慨的莫过于【<strong>变化太快</strong>】。各种思想、框架、类库层出不穷，同一个需求点，通常会有多种实现方案，架构选型工作的难度与日俱增。面对每天都在产生的前端领域新词汇，不免感到心累，也难免产生廉颇老矣，尚能饭否的危机感。</p>
<p>无论如何，架构选型和升级的工作仍然要做，在这样的趋势和潮流下，要想对每一种流行概念都了如指掌成本很高，也没有这个必要。反倒是理清前端开发背后的需求至关重要，只要明白了前端开发需求的本质，也就很容易把散落在开源社区里的各种珍珠捡起来，串起来了。<br></p>
<h2 id="关注点"><a href="#关注点" class="headerlink" title="关注点"></a>关注点</h2><p>在若干年前，大部分的web系统架构都是多页面架构，用户点击链接就会完全重新加载页面，这种架构如今在大部分场景中已经过时，所以这篇文章只针对SPA架构的应用。</p>
<p>接下来我会以对一个复杂Web前端系统的架构为例，分析一下都需要关注那些点，每个点上都有哪些考虑。</p>
<h3 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h3><p>一个web系统最终都是要通过URL来访问的，在SPA架构下，URL指代的是页面的状态，通过URL的变化来路由到另一种状态。（数据接口URL会在Server API部分介绍）因此，需要关注的点有：</p>
<ul>
<li>URL的结构设计成什么样？</li>
<li>URL的结构设计的粒度到什么程度？</li>
<li>如何监听URL的变化并触发不同状态的呈现？</li>
<li>使用哪种history？<ul>
<li>browserHistory / hashHistory / memoryHistory / ……</li>
</ul>
</li>
<li>URL切换前后是否需要执行相关逻辑？</li>
<li>哪些组件可以触发URL的变化？应该如何规范导致这一行为的写法？</li>
<li>URL传递参数应该遵循什么样的规范？如何保障参数的安全性？</li>
</ul>
<h3 id="Server-API"><a href="#Server-API" class="headerlink" title="Server API"></a>Server API</h3><p>WEB应用数据来源于服务端，针对不同的场景和不同的前后端架构模式，需要解决几个问题：</p>
<ul>
<li>如何针对不同的场景（开发、联调、线上）提供可靠的数据服务？</li>
<li>如何定义接口书写规范？</li>
<li>接口文档如何进行管理？</li>
<li>如何能够优雅地进行前后端联调？</li>
</ul>
<h3 id="Data"><a href="#Data" class="headerlink" title="Data"></a>Data</h3><p>Data主要描述页面上要显示什么信息，Data一般分为两类数据：一类是从后端Server API拉取回来的数据APIData，另一类是标识界面状态的数据State。这两类数据共同决定了界面最终呈现的状态。在实际的开发中，针对Data需要考虑以下几个点：</p>
<ul>
<li>怎么从服务器端拉取数据？<ul>
<li>Ajax / Fetch / JSONP /……</li>
</ul>
</li>
<li>异步请求该如何优雅地书写和组织？<ul>
<li>Promise / thunk / co / async / generator function  / ……</li>
</ul>
</li>
<li>如何保证数据不被随意的篡改？应该定义怎样的数据读写规范？</li>
<li>如何对数据进行预处理，从而实现View层渲染时需要的结构？</li>
<li>数据该如何传递给View层？</li>
<li>数据层是否应该独立管理？还是按照业务和其他角色代码混在一起？</li>
</ul>
<h3 id="View"><a href="#View" class="headerlink" title="View"></a>View</h3><p>View主要描述页面的最终呈现样式。主要关注的点有：</p>
<ul>
<li>采用什么技术来进行页面渲染？<ul>
<li>模板引擎</li>
<li>虚拟dom</li>
<li>UI组件</li>
</ul>
</li>
<li>页面的初始状态如何定义和渲染？</li>
<li>页面上的交互如何处理？</li>
<li>页面的样式如何定义和使用？</li>
<li>如何保证样式只针对当前页面生效？</li>
<li>如何更优雅地书写和管理css样式资源？<ul>
<li>less / sass /postcss / css module /……</li>
<li>集中管理 / 就近管理 / 混合管理</li>
</ul>
</li>
<li>如何提高样式资源的可维护性？</li>
<li>View如何被创建，如何被销毁，生命周期如何管理？</li>
<li>View层代码改如何组织？独立还是和其他角色混合？独立的话，如何分拆关联？</li>
<li>如何实现页面状态（data、url）改变时View层自动渲染刷新？</li>
</ul>
<h3 id="Action"><a href="#Action" class="headerlink" title="Action"></a>Action</h3><p>Action主要描述用户或者程序对页面做了什么操作，以及操作行为的处理方法，关注点有</p>
<ul>
<li>页面存在哪些可能的交互？</li>
<li>如何管理这些行为交互，确保行为变的可以预测、监控？是否所有的交互都需要可预测、监控？边界如何界定？</li>
<li>哪些交互是纯粹组件内部的交互？哪些交互会影响其他组件的状态？对交互该如何分类？不同的交互类型应该采用什么样的处理规范？</li>
<li>如何组织和书写交互响应逻辑代码？</li>
<li>交互最终如何反映到View的更新？</li>
<li>交互中如果存在异步请求，改如何组织代码？</li>
</ul>
<h3 id="Aspect"><a href="#Aspect" class="headerlink" title="Aspect"></a>Aspect</h3><p>监控页面行为、搜集数据、统一错误处理、权限校验等需求</p>
<ul>
<li>我的系统中有哪些地方需要嵌入切面逻辑？</li>
<li>如何优雅地实现切面？</li>
<li>如何保证切面逻辑可以在任何路由场景下都保持可靠？<ul>
<li>点击链接触发路由切换</li>
<li>手动输入url触发路由切换</li>
<li>api调用触发路由切换</li>
<li>session失效后如何处理？</li>
</ul>
</li>
</ul>
<h3 id="AB-Test"><a href="#AB-Test" class="headerlink" title="AB Test"></a>AB Test</h3><p>如何做针新功能进行灰度发布或者权限控制</p>
<ul>
<li>如何获取当前用户的灰度权限？</li>
<li>对于同时存在多个灰度策略的场景如何兼顾获取权限的性能和编码体验？</li>
<li>如何根据灰度权限来优雅地渲染页面？</li>
</ul>
<h3 id="组件复用"><a href="#组件复用" class="headerlink" title="组件复用"></a>组件复用</h3><p>复杂web系统里组件复用是强需求，关注点在：</p>
<ul>
<li>如何决定组件的拆分粒度？</li>
<li>如何定义和界定组件的类型？<ul>
<li>系统内复用的特定业务组件；</li>
<li>系统间复用的通用业务组件；</li>
<li>通用的基础组件、工具等</li>
</ul>
</li>
<li>不同类型的组件如何组织管理，便于复用？</li>
<li>如何基于现有的技术体系制定通用组件的发布、复用规范？</li>
</ul>
<h3 id="工程化"><a href="#工程化" class="headerlink" title="工程化"></a>工程化</h3><p>如何简化开发体验，提高开发效率，解决环境搭建、服务启动、热更新、mock、测试、联调、构建、部署、性能优化等问题。</p>
<ul>
<li>如何快速地搭建项目脚手架？</li>
<li>如何实现简单、优雅、团队统一的工程化开发体验？</li>
<li>如何简化各种工程化配置？</li>
<li>如何实现持续集成和持续构建？</li>
<li>选择何种前后端上线部署方案？分离 or 合并？</li>
<li>如何针对应用的特点做好极致的性能优化？</li>
<li>如何实现优雅的线上、测试环境的代码调试？</li>
<li>如何实现优雅、强大的打包构建服务？</li>
</ul>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>前端开发行业折腾来折腾去，其实都是围绕怎么更好地解决这些本质的问题。有些实现可能是针对某几类或者某一类问题，关注点更小的就只解决某几个问题。</p>
<p>比如：</p>
<ul>
<li>Webpack主要针对工程化类中的打包构建问题；</li>
<li>react主要解决view层的问题；</li>
<li>redux主要解决data、view、action之间数据流转的问题；</li>
<li>……</li>
</ul>
<p>除了上述关注点以外，对于大的前端团队，通常还会考虑封装的问题。就是通过封装为业务开发者屏蔽很多杂乱、零碎的技术细节，提供简单、统一、好理解的API及开发工具来提高开发生产效率。</p>


                
            </div>

            <!-- Comments -->
            
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    


                </div>
            
        </div>
    </div>
</article>

    <!-- Footer -->
    <hr />

<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    

                    

                    
                        <li>
                            <a href="https://github.com/shanggqm" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    

                    

                    
                </ul>
                <p class="copyright text-muted">&copy; 2016 guomeiqing<br></p>
                <p class="copyright text-muted">Original Theme <a target="_blank" href="http://startbootstrap.com/template-overviews/clean-blog/">Clean Blog</a> from <a href="http://startbootstrap.com/" target="_blank">Start Bootstrap</a></p>
                <p class="copyright text-muted">Adapted for <a target="_blank" href="https://hexo.io/">Hexo</a> by <a href="http://www.codeblocq.com/" target="_blank">Jonathan Klughertz</a></p>
            </div>
        </div>
    </div>
</footer>


    <!-- After footer scripts -->
    
<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Bootstrap -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->



</body>

</html>